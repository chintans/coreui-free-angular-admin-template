<c-row>
  <c-col xs="12">
    <c-card class="mb-4">
      <c-card-header>
        <div class="d-flex align-items-center">
          <svg cIcon name="cilMagnifyingGlass" class="me-2"></svg>
          <strong>Step 5: Deep Research & Model Selection</strong>
        </div>
      </c-card-header>
      <c-card-body>
        <c-row>
          <c-col md="8">
            <h5 class="mb-4">Select AI Model</h5>
            <c-row class="mb-4">
              @for (model of models; track model.id) {
                <c-col md="4" class="mb-3">
                  <c-card
                    class="cursor-pointer h-100"
                    [class.border-primary]="selectedModel() === model.id"
                    [class.bg-primary-subtle]="selectedModel() === model.id"
                    (click)="selectModel(model.id)"
                  >
                    <c-card-body class="text-center">
                      <svg cIcon [name]="model.icon" size="3xl" class="mb-3 text-primary"></svg>
                      <h6 class="mb-2">{{ model.name }}</h6>
                      <c-badge [color]="selectedModel() === model.id ? 'primary' : 'secondary'" class="mb-2">
                        {{ model.strength }}
                      </c-badge>
                      <p class="small text-muted mb-0">{{ model.description }}</p>
                    </c-card-body>
                  </c-card>
                </c-col>
              }
            </c-row>

            <h5 class="mb-3">Research Scope Preview</h5>
            <c-card class="bg-light border-0 mb-4">
              <c-card-body>
                <ul class="mb-0">
                  @for (item of researchScope(); track item) {
                    <li class="mb-2 d-flex align-items-center">
                      <svg cIcon name="cilCheckCircle" class="text-success me-2"></svg>
                      {{ item }}
                    </li>
                  }
                </ul>
              </c-card-body>
            </c-card>

            <div class="d-grid">
              <button
                cButton
                color="primary"
                size="lg"
                (click)="executeResearch()"
                [disabled]="isResearching()"
              >
                @if (isResearching()) {
                  <c-spinner size="sm" class="me-2"></c-spinner>
                  Researching... {{ researchProgress() }}%
                } @else {
                  Execute Research & Build Strategy
                  <svg cIcon class="ms-2" name="cilRocket"></svg>
                }
              </button>
              @if (isResearching()) {
                <c-progress class="mt-3" [value]="researchProgress()" animated></c-progress>
              }
            </div>
          </c-col>

          <c-col md="4">
            <c-card class="bg-info-subtle border-0 h-100">
              <c-card-body>
                <h5 class="card-title text-info-emphasis mb-3">
                  <svg cIcon class="me-2" name="cilInfo"></svg>
                  Why Deep Research?
                </h5>
                <p class="text-info-emphasis">
                  ScaleX uses advanced AI agents to crawl the web, analyze competitors, and synthesize market data.
                </p>
                <p class="text-info-emphasis">
                  This process ensures your strategy is backed by real-time data and actionable insights, not just generic advice.
                </p>
                <div class="mt-4">
                  <h6 class="text-info-emphasis mb-2">What to Expect:</h6>
                  <ul class="small text-info-emphasis">
                    <li>Comprehensive market analysis</li>
                    <li>Competitor benchmarking</li>
                    <li>Data-driven recommendations</li>
                    <li>Actionable insights</li>
                  </ul>
                </div>
              </c-card-body>
            </c-card>
          </c-col>
        </c-row>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

